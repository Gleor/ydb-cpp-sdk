add_library(yql-parser-pg_query_wrapper)
target_compile_options(yql-parser-pg_query_wrapper PRIVATE
  -Dpg_encoding_max_length=pg_encoding_max_length2
  -Dpg_encoding_mblen=pg_encoding_mblen2
  -Dpg_mule_mblen=pg_mule_mblen2
  -Dpg_utf8_islegal=pg_utf8_islegal2
  -Dpg_utf_mblen=pg_utf_mblen2
  -Dpg_wchar_table=pg_wchar_table2
  -Dunicode_to_utf8=unicode_to_utf82
  -Dutf8_to_unicode=utf8_to_unicode2
  -Dpg_enc2name_tbl=pg_enc2name_tbl2
  -Dstrtoint=strtoint2
  -Dpalloc=pallocx
  -Dpalloc0=palloc0x
  -Dpfree=pfreex
  -Dpstrdup=pstrdupx
  -Drepalloc=repallocx
  -DHAVE_STRCHRNUL
)
target_include_directories(yql-parser-pg_query_wrapper PRIVATE
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/include
)
target_link_libraries(yql-parser-pg_query_wrapper PUBLIC
  contrib-libs-cxxsupp
  yutil
  yql-public-issue
)
target_sources(yql-parser-pg_query_wrapper PRIVATE
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/wrapper.cpp
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/outfuncs.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/guc-file.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_catalog_namespace.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_catalog_pg_proc.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_commands_define.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_nodes_bitmapset.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_nodes_copyfuncs.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_nodes_equalfuncs.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_nodes_extensible.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_nodes_list.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_nodes_makefuncs.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_nodes_nodeFuncs.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_nodes_value.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_parser_gram.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_parser_parse_expr.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_parser_parser.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_parser_scan.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_parser_scansup.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_storage_ipc_ipc.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_storage_lmgr_s_lock.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_tcop_postgres.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_utils_adt_datum.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_utils_adt_expandeddatum.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_utils_adt_format_type.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_utils_adt_ruleutils.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_utils_error_assert.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_utils_error_elog.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_utils_fmgr_fmgr.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_utils_hash_dynahash.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_utils_init_globals.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_utils_mb_mbutils.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_utils_misc_guc.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_utils_mmgr_aset.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_backend_utils_mmgr_mcxt.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_common_encnames.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_common_hashfn.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_common_keywords.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_common_kwlookup.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_common_psprintf.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_common_string.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_common_stringinfo.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_common_wchar.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_pl_plpgsql_src_pl_comp.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_pl_plpgsql_src_pl_funcs.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_pl_plpgsql_src_pl_gram.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_pl_plpgsql_src_pl_handler.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_pl_plpgsql_src_pl_scanner.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_port_erand48.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_port_pg_bitutils.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_port_pgsleep.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_port_pgstrcasecmp.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_port_qsort.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_port_random.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_port_snprintf.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_port_strerror.c
  ${CMAKE_SOURCE_DIR}/ydb/library/yql/parser/pg_query_wrapper/contrib/src/postgres/src_port_strnlen.c
)
